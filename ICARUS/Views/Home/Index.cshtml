@{
    ViewBag.Title = "Index";
}

@section ServiceWorker {
    <script type="text/javascript">
        console.log('Index.ServiceWorker');
        // https://developers.google.com/web/fundamentals/app-install-banners/
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            // Prevent Chrome 67 and earlier from automatically showing the prompt
            e.preventDefault();
            // Stash the event so it can be triggered later.
            deferredPrompt = e;
            // Update UI notify the user they can add to home screen
            //btnAdd.style.display = 'block';
            console.log('Service-Worker: Index: This page can be installed as an App');
        });

        window.addEventListener('appinstalled', (evt) => {
            //app.logEvent('a2hs', 'installed');
            console.log('service-worker: App Installed');
        });

        // Register service worker
        // https://developers.google.com/web/fundamentals/primers/service-workers/
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function () {
                navigator.serviceWorker.register('service-worker.js').then(function (registration) {
                    // Registration was successful
                    console.log('ServiceWorker registration successful with scope: ', registration.scope);
                }, function (err) {
                    // registration failed :(
                    console.log('ServiceWorker registration failed: ', err);
                });
            });
        }
    </script>
}

@section Scripts {
    <script src="@Url.Content("~/Scripts/injector/main.js")" type="module"></script>
}

@section viewInit {
    <script src="@Url.Content("~/Scripts/icarus/main.js")" type="module"></script>
}