@model IEnumerable<ICARUS.Models.FormGroup>
@{
    ViewBag.Title = "Index";
}
<h2>Form Groups</h2>
@{
    if (User.IsInRole("Admin")) {
        <h4>@Html.ActionLink("Create New Form Group", "Create")</h4>
    }
}
<table class="table-fixed">
    <thead>
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.label)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.categoryId)
            </th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model) {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.label)
                </td>

                <td>
                    @Html.DisplayFor(modelItem => item.categoryId)
                </td>

                <td align="right" style="overflow: visible">
                    <div class="btn-group btn-group-sm" role="group" aria-label="Small button group">
                        <button type="button" class="btn btn-default">
                            @Html.ActionLink("Details", "Details", new { area = "", id = item.id }, new { @class = "text-left" })
                        </button>
                        <button type="button"
                                class="btn btn-default dropdown-toggle"
                                data-toggle="dropdown"
                                aria-haspopup="true" aria-expanded="false">
                            @if (User.IsInRole("Admin"))
                            {
                                <span class="caret"></span>
                                <span class="sr-only">Toggle Dropdown</span>
                            }
                        </button>
                        @if (User.IsInRole("Admin")) {
                            <ul class="dropdown-menu" style="left:-75px">
                                <li>
                                    @Html.ActionLink("Elements", "Index", "FormElements", new { area = "", id = item.id }, new { @class = "text-left" })
                                </li>
                                <li>
                                    @Html.ActionLink("Edit", "Edit", new { area = "", id = item.id }, new { @class = "text-left" })
                                </li>
                                <li role="separator" class="divider"></li>
                                <li>
                                    @Html.ActionLink("Delete", "Delete", new { area = "", id = item.id }, new { @class = "text-left" })
                                </li>
                            </ul>
                        }
                    </div>
                </td>

                
            </tr>
        }
    </tbody>
</table>

<h4>@Html.ActionLink("Home", "Index", "Home")</h4>

@section viewInit {
    <script type="text/javascript">
        $(".btn-delete").on('click', function (event) {
            event.stopPropagation();
            event.stopImmediatePropagation();
            if (confirm('Are you sure you want to do that?\nOnce deleted, this object can not be restored!')) {
                return true;
            } else {
                console.log('Action cancelled');
                return false;
            };
        });
    </script>
}