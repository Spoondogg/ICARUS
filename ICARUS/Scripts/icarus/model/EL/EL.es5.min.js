"use strict";function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function _inherits(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var _createClass=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),_get=function(n,t,i){var e=!0,r,f,o;n:while(e){var u=n,s=t,h=i;if(e=!1,u===null&&(u=Function.prototype),r=Object.getOwnPropertyDescriptor(u,s),r===undefined){if(f=Object.getPrototypeOf(u),f===null)return undefined;n=f;t=s;i=h;e=!0;r=f=undefined;continue n}else return"value"in r?r.value:(o=r.get,o===undefined)?undefined:o.call(h)}},EL=function(n){function t(n,i,r,u,f){i===undefined&&(i="DIV");_classCallCheck(this,t);_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,r.attributes);this.node=n;this.className=this.constructor.name;this.element=i||HtmlElement.DEFAULT;this.status=STATUS.DEFAULT;this.children=f?f:[];this.callbacks={};this.make(n,r,u)}return _inherits(t,n),_createClass(t,[{key:"make",value:function(n,t,i){try{n===document.body?(this.el=n.appendChild(document.createElement(this.element)),n=this):this.el=n.el.appendChild(document.createElement(this.element));this.merge(t);this.setInnerHTML(i)}catch(r){console.log(r)}return this.el}},{key:"getProtoTypeByClass",value:function(n){var t=arguments.length<=1||arguments[1]===undefined?this.node:arguments[1],i=arguments.length<=2||arguments[2]===undefined?0:arguments[2];i++;try{if(debug("Searching for __proto__.__proto__.constructor.name: "+n+"("+i+")"),i<100)try{return debug("id: "+t.id),debug("super class: "),debug(t.__proto__),t.__proto__.__proto__.constructor.name===n.toString()?t:this.getProtoTypeByClass(n,t.node,i++)}catch(r){return debug(r),null}else return debug("getProtoTypeByClass(): Too many attempts ("+i+")"),null}catch(r){r.name==="TypeError"?console.log("Error Caught: "+r.message):console.log("Error not caught.");console.log(r)}}},{key:"edit",value:function(){app.stickyFooter.show();$(this.el).addClass("edit");this.editor=new TEXTAREA(app.stickyFooter,new MODEL(new ATTRIBUTES({value:this.el.innerHTML})).set({label:"<"+this.element+">"}));this.editor.input.el.setAttribute("style","height:200px;");this.editor.input.el.onkeyup=function(){this.el.innerHTML=this.editor.input.el.value}.bind(this);this.editor.input.el.onblur=function(){try{console.log("Editing "+this.className+" inside "+this.node.className);var n=this.editor.input.el.value;console.log("Value: "+n);this.node.node.node.data[this.className.toLowerCase()]=n;console.log("THIS.NODE.NODE (Container) ELEMENT DATA:");console.log(this.node.node.node)}catch(t){console.log(t)}this.editor.destroy();$(this.el).removeClass("edit");debug("QuickSave");this.getProtoTypeByClass("CONTAINER").quickSave(!0);app.stickyFooter.hide();app.stickyFooter.empty()}.bind(this);this.editor.input.el.focus();event.stopPropagation()}},{key:"create",value:function(n){var t=null;try{this.callbacks[n.className].forEach(function(i){t=i(n)}.bind(this))}catch(i){app.loader.log(0,this.className+'.create(): No constructor exists for className "'+n.className+'"');debug(i)}return t}},{key:"addCase",value:function(n,t){this.callbacks[n]=[];this.callbacks[n].push(t)}},{key:"merge",value:function(n){var i,t;if(typeof n=="object")for(i in n)if(i!=="attributes")this[i]=n[i];else for(t in n.attributes)t!=="innerHTML"?this.el.setAttribute(t,n.attributes[t]):t==="innerHTML"&&(this.el.innerHTML=n.attributes[t]);else console.log("EL.merge(): Given model is not a valid object")}},{key:"open",value:function(){this.status=STATUS.OPEN;try{this.node.open()}catch(n){console.log("Unable to open parent element("+this.element+")");console.log(n)}}},{key:"close",value:function(){this.status=STATUS.CLOSED;this.el.setAttribute("data-status","closed")}},{key:"empty",value:function(){while(this.el.firstChild)this.el.removeChild(this.el.firstChild)}},{key:"destroy",value:function(n){n=n?n:300;try{setTimeout(function(){this.el.parentNode.removeChild(this.el)}.bind(this),n);try{var t=this.node.children.indexOf(this);this.node.children.splice(t,1)}catch(r){console.log("Unable to remove "+this.element+" from node.children")}}catch(i){console.log("Unable to destroy this "+this.element);console.log(i)}}},{key:"setClass",value:function(n){this.el.className=n;this.attributes["class"]=n}},{key:"addClass",value:function(n){$(this.el).addClass(n);var t=this.attributes["class"]||"";this.attributes["class"]=t+=" "+n}},{key:"removeClass",value:function(n){$(this.el).removeClass(n);this.attributes.set("class",this.attributes.get("class").replace(n,""))}},{key:"show",value:function(){this.el.style.display="block"}},{key:"hide",value:function(){this.el.style.display="none"}},{key:"activate",value:function(){$(this.el).addClass("active")}},{key:"deactivate",value:function(){$(this.el).removeClass("active")}},{key:"toggle",value:function(n){n?$(this.el).toggleClass(n):$(this.el).toggle()}},{key:"populate",value:function(n){var i,r,t;if(n){i=n.length;r=0;try{for(t=0;t<n.length;t++)r=Math.round((t+1)/i*100),this.create(n[t])}catch(u){console.log(u)}DEBUGMODE||app.loader.hide()}}},{key:"setInnerHTML",value:function(n){this.el.innerHTML=n||""}},{key:"scrollTo",value:function(){var n=arguments.length<=0||arguments[0]===undefined?1e3:arguments[0];console.log("Scrolling to this element at "+parseInt($(this.el).offset().top));$(this.node.el).animate({scrollTop:parseInt($(this.el).offset().top)},n)}}]),t}(MODEL);