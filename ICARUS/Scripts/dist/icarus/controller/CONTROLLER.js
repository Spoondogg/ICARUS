import MAIN,{LOADER,MODEL}from"../model/el/container/main/MAIN.js";import CONTAINERFACTORY from"./CONTAINERFACTORY.js";import WATERMARK from"../helper/WATERMARK.js";export default class CONTROLLER extends MODEL{constructor(r=0,t="Guest",i=!1,e=100,s,o,n,l){super().set({id:r,user:t,dev:i,recursionLimit:e,name:s,version:o,token:n,factory:l}),this.watermark=new WATERMARK,this.url=new URL(window.location.href),this.debug=!0,this.returnUrl=this.url.searchParams.get("ReturnUrl"),this.returnUrl&&(this.returnUrl=this.url.origin+this.returnUrl,location.href=this.returnUrl),this.loader=new LOADER("Loading","Loading",100),this.loader.log(100,"Launching application...",!0),this.prompt=null,this.main=new MAIN((new MODEL).set({id:r,user:t,dev:i,factory:l,token:n,label:"",loader:this.loader,url:this.url,debug:this.debug,recursionLimit:this.recursionLimit})),"Guest"===t&&this.showLoginPrompt()}showLoginPrompt(){return this.url.searchParams.get("login")&&this.main.login(),this}redirectToReturnUrl(){return this.url.searchParams.get("ReturnUrl")&&(location.href=this.url.origin+this.returnUrl),this}}export{CONTAINERFACTORY};
//# sourceMappingURL=CONTROLLER.js.map
