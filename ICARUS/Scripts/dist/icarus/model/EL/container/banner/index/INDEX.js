import CONTAINER,{ATTRIBUTES,MODEL}from"../../CONTAINER.js";import BANNER from"../BANNER.js";import DIV from"../../../div/DIV.js";import HEADER from"../../../header/HEADER.js";import{ICONS}from"../../../../../enums/ICONS.js";import MENULIST from"../../menulist/MENULIST.js";import MODAL from"../../../modal/MODAL.js";import NAVITEMICON from"../../../nav/navitemicon/NAVITEMICON.js";import P from"../../../p/P.js";export default class INDEX extends BANNER{constructor(e,t){super(e,t),this.addClass("index"),this.token=this.getMainContainer().getToken()}construct(){this.containerHeader=new HEADER(this.body.pane,(new MODEL).set({label:"INDEX"}));let e=["ARTICLE","FORM","JUMBOTRON","BANNER","CALLOUT","THUMBNAIL","CHAT","DICTIONARY","WORD","IMAGEGALLERY"];for(let t=0;t<e.length;t++){let n=new NAVITEMICON(this.body.pane,(new MODEL).set({anchor:(new MODEL).set({icon:ICONS[e[t].toUpperCase()],label:e[t],dataId:-1,data:{header:e[t],p:"&nbsp;"}})}));this.addThumbButtonActions(e[t],n)}}addThumbButtonActions(e,t){$.post("/"+e+"/List",{__RequestVerificationToken:this.getMainContainer().getToken()},(e,n)=>{if("success"===n){let n="There are "+e.list.length+" instances of "+e.className;t.el.setAttribute("title",n),t.el.onclick=(()=>{this.launchModal(e.className,n,e.className,e.list)})}})}launchModal(e,t,n,o){console.log("Launch Index Thumbnail Modal"),this.modal=new MODAL(e),this.modal.container.body.pane.addClass("thumbnail index-thumbnail"),this.modal.container.header=new HEADER(this.modal.container.body.pane,(new MODEL).set({label:e})),this.modal.container.p=new P(this.modal.container.body.pane,new MODEL(new ATTRIBUTES({style:"height:auto;"})),t),this.modal.container.previewNotes=new DIV(this.modal.container.body.pane,new MODEL(new ATTRIBUTES({class:"preview-notes"})),""),this.modal.container.preview=new CONTAINER(this.modal.container.body.pane,"DIV",new MODEL(new ATTRIBUTES("preview")),[n.toUpperCase()]),this.modal.container.preview.el.setAttribute("style","height:400px;max-height:400px;overflow-y:auto;"),this.modal.container.menulist=new MENULIST(this.modal.container.body.pane,new MODEL(new ATTRIBUTES({style:"max-height:200px;overflow-y:auto;"})).set({name:"preview-list",label:n+"(s)"}));for(let e=0;e<o.length;e++){let t=o[e].label+" ("+n+"["+o[e].id+"])";this.modal.container.menulist.menu.addNavItem((new MODEL).set({label:t})).el.onclick=(()=>{this.modal.container.preview.body.pane.empty(),this.launchPreview(500,n,o[e].id)})}this.modal.show()}launchPreview(e=500,t,n){setTimeout(()=>{$.getJSON("/"+t+"/Get/"+n,e=>{console.log(t,e),this.modal.container.preview.create(e.model)})},e),setTimeout(()=>{$.getJSON("/"+t+"/GetContainerParents/"+n,e=>{console.log(t+" Parents:",e,e.length+" parent Containers"),this.modal.container.previewNotes.el.innerHTML="Parent Containers: "+e.length})},e)}}
//# sourceMappingURL=INDEX.js.map
