{"version":3,"sources":["model/EL/container/banner/thumbnail/THUMBNAIL.js"],"names":["CONTAINER","ATTRIBUTES","EL","MODEL","STRING","BUTTONGROUP","HEADER","ICONS","IMG","MODAL","P","THUMBNAIL","[object Object]","node","model","super","this","setClass","body","pane","addClass","image","header","set","label","data","p","truncate","buttonGroup","button","addButton","CHEVRON_RIGHT","dataId","parsed","img","Number","isInteger","parseInt","$","getJSON","jsonResults","JSON","parse","length","name","value","el","src","base64","ee","console","log","showImageDetails","innerHTML","filename","id","fileSize","dimX","dimY","fileType","e","onclick","launchModal","bind","modal","container","style","show"],"mappings":"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","file":"THUMBNAIL.js","sourcesContent":["/** @module */\r\nimport CONTAINER, { ATTRIBUTES, EL, MODEL, STRING } from '../../CONTAINER.js';\r\nimport BUTTONGROUP from '../../../group/buttongroup/BUTTONGROUP.js';\r\nimport HEADER from '../../../header/header.js';\r\nimport { ICONS } from '../../../../../enums/ICONS.js';\r\nimport IMG from '../../../img/IMG.js';\r\nimport MODAL from '../../../modal/MODAL.js';\r\nimport P from '../../../p/P.js';\r\n/** Jumbotron with centered icon and text\r\n    @class\r\n    @extends CONTAINER\r\n*/\r\nexport default class THUMBNAIL extends CONTAINER {\r\n\t/** Constructs a Bootstrap Jumbotron.\r\n        @param {CONTAINER} node The model\r\n        @param {MODEL} model Object Model\r\n    */\r\n\tconstructor(node, model) {\r\n\t\tsuper(node, 'DIV', model);\r\n\t\tthis.setClass('col-xs-12 col-sm-6 col-md-4 col-lg-offset-0'); // Override icarus-container \r\n\t\tthis.body.pane.addClass('thumbnail');\r\n\t}\r\n\tconstruct() {\r\n\t\tthis.image = new IMG(this.body.pane, new MODEL());\r\n\t\tthis.header = new HEADER(this.body.pane, new MODEL().set({ 'label': this.data.header }));\r\n\t\tthis.p = new P(this.body.pane, new MODEL(), new STRING(this.data.p).truncate(128));\r\n\t\tthis.buttonGroup = new BUTTONGROUP(this.body.pane, 'btn-block');\r\n\t\tthis.button = this.buttonGroup.addButton('', ICONS.CHEVRON_RIGHT);\r\n\t\tthis.button.addClass('btn-block');\r\n\t\tif (this.dataId > 0 || this.dataId === -1) {\r\n\t\t\tlet parsed = null;\r\n\t\t\tif (this.data.img) {\r\n\t\t\t\t// If this.data.img is integer, retrieve relevant formpost\r\n\t\t\t\tif (Number.isInteger(parseInt(this.data.img))) {\r\n\t\t\t\t\t// Test to see if the formpost can be retrieved\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\t$.getJSON('/FORMPOST/Get/' + parseInt(this.data.img), (data) => { // If access granted...\r\n\t\t\t\t\t\t\tif (data.model) {\r\n\t\t\t\t\t\t\t\tif (data.model.jsonResults) {\r\n\t\t\t\t\t\t\t\t\tparsed = JSON.parse(data.model.jsonResults);\r\n\t\t\t\t\t\t\t\t\t// Extract the base64 values and create an image\r\n\t\t\t\t\t\t\t\t\tlet img = {};\r\n\t\t\t\t\t\t\t\t\tfor (let p = 0; p < parsed.length; p++) {\r\n\t\t\t\t\t\t\t\t\t\timg[parsed[p].name] = parsed[p].value;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\t\t//this.image.el.src = img['base64'];\r\n\t\t\t\t\t\t\t\t\t\tthis.image.el.src = img.base64;\r\n\t\t\t\t\t\t\t\t\t} catch (ee) {\r\n\t\t\t\t\t\t\t\t\t\tconsole.log('Unable to set Thumbnail image', img);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t// Set text in Thumbnail when required (see ImageGallery.js)\r\n\t\t\t\t\t\t\t\t\tif (this.data.showImageDetails) {\r\n\t\t\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\t\t\t//this.image.el.src = img['base64'];\r\n\t\t\t\t\t\t\t\t\t\t\t//this.header.el.innerHTML = img['filename'];\r\n\t\t\t\t\t\t\t\t\t\t\tthis.header.el.innerHTML = img.filename;\r\n\t\t\t\t\t\t\t\t\t\t\t//this.p.el.innerHTML = 'Id: ' + img['id'] + '<br>' + 'Filesize: ' + img['fileSize'] + 'kb (' + img['dimX'] + ' x ' + img['dimY'] + ')<br>' + img['fileType'];\r\n\t\t\t\t\t\t\t\t\t\t\tthis.p.el.innerHTML = 'Id: ' + img.id + '<br>Filesize: ' + img.fileSize + 'kb (' + img.dimX + ' x ' + img.dimY + ')<br>' + img.fileType;\r\n\t\t\t\t\t\t\t\t\t\t} catch (ee) {\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.log('Unable to set Thumbnail attributes', img);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tconsole.log('Json Results empty');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\tconsole.log('Unable to retrieve FormPost.', e);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.image = new IMG(this.body.pane, new MODEL(new ATTRIBUTES({ 'src': this.data.img })));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.button.el.onclick = this.launchModal.bind(this);\r\n\t\t}\r\n\t}\r\n\t/** Launches a modal that contains the detailed view of the given article\r\n\t    @returns {void}\r\n\t*/\r\n\tlaunchModal() {\r\n\t\tthis.modal = new MODAL(this.data.header);\r\n\t\tthis.modal.container.body.pane.addClass('thumbnail');\r\n\t\tthis.modal.container.image = new IMG(this.modal.container.body.pane, new MODEL());\r\n\t\tthis.modal.container.image.el.src = this.image.el.src;\r\n\t\tthis.modal.container.header = new HEADER(this.modal.container.body.pane, new MODEL().set({\r\n\t\t\t'label': this.data.header\r\n\t\t}));\r\n\t\tthis.modal.container.p = new P(this.modal.container.body.pane, new MODEL(new ATTRIBUTES({\r\n\t\t\t'style': 'height:auto;'\r\n\t\t})), this.data.p);\r\n\t\tthis.modal.show();\r\n\t}\r\n}\r\nexport { ATTRIBUTES, EL, MODEL };"]}