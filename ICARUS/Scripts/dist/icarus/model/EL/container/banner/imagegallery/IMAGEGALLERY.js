import BUTTONGROUP,{BUTTON,MODEL}from"../../../group/buttongroup/BUTTONGROUP.js";import BANNER from"../BANNER.js";import FOOTER from"../../../footer/FOOTER.js";import HEADER from"../../../header/HEADER.js";import THUMBNAIL from"../thumbnail/THUMBNAIL.js";export default class IMAGEGALLERY extends BANNER{constructor(t,e){super(t,e),this.addClass("image-gallery"),this.page=0,this.pageLength=6,this.pageTotal=0,this.header=new HEADER(this,(new MODEL).set({label:"Image Gallery"})),$(this.header.el).insertBefore(this.body.pane.el),this.pagination=this.createPaginationFooter(),this.footer=new FOOTER(this,new MODEL),$(this.pagination.el).insertAfter(this.body.pane.el),this.loadPage(this.page)}createPaginationFooter(){let t=new FOOTER(this,new MODEL("pagination text-center"));return $(t.el).insertBefore(this.body.pane.el),t.btnPrev=new BUTTON(this.pagination,"Prev"),t.btnPrev.el.setAttribute("style","margin-right:1em;"),t.btnPrev.el.onclick=this.prevPage.bind(this),t.buttonGroup=new BUTTONGROUP(this.pagination),t.buttonGroup.loaded=!1,t.btnNext=new BUTTON(this.pagination,"Next"),t.btnNext.el.setAttribute("style","margin-left:1em;"),t.btnNext.el.onclick=this.nextPage.bind(this),t}construct(){let t="/ImageGallery/ImageIndex";this.page&&(t+="?page="+this.page+"&pageLength="+this.pageLength),$.post(t,{__RequestVerificationToken:this.getMainContainer().token},(t,e)=>{if("success"===e){this.pageTotal=t.total;for(let e=0;e<t.list.length;e++){let i=new THUMBNAIL(this.body.pane,(new MODEL).set({label:t.list[e].label,dataId:-1,data:{header:t.list[e].label,p:"Launch "+t.list[e].label+" ("+t.list[e].id+")<br>"+t.className+"["+t.list[e].index+"]",img:t.list[e].id,showImageDetails:!0}}));0===t.list[e].id&&i.image.el.setAttribute("style","display:none;"),i.button.el.onclick=(()=>{this.launchMain(t.list[e].id)})}if(!this.pagination.buttonGroup.loaded){this.pageCount=Math.ceil(this.pageTotal/this.pageLength);for(let t=0;t<this.pageCount;t++)this.pagination.buttonGroup.addButton(t+1).el.onclick=(()=>{this.loadPage(t)});this.pagination.buttonGroup.loaded=!0}}})}loadPage(t){console.log("Loading page "+t),this.header.setInnerHTML("Page "+(t+1));let e=this.pagination.buttonGroup.el.children;for(let t=0;t<e.length;t++)$(e[t]).removeClass("active");$(e[t]).addClass("active"),this.body.pane.empty(),this.page=t,this.construct()}nextPage(){this.pageTotal>this.page*this.pageLength+1?this.loadPage(this.page+1):console.log("No next pages to display")}prevPage(){this.page>0?this.loadPage(this.page-1):console.log("No previous pages to display")}launchMain(t){window.open(new URL(window.location.href).origin+"/FormPost/Get/"+t)}}
//# sourceMappingURL=IMAGEGALLERY.js.map
