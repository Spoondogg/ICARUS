import CONTAINER,{ATTRIBUTES,EL,MODEL,STRING}from"../../CONTAINER.js";import BUTTONGROUP from"../../../group/buttongroup/BUTTONGROUP.js";import HEADER from"../../../header/header.js";import{ICONS}from"../../../../../enums/ICONS.js";import IMG from"../../../img/IMG.js";import MODAL from"../../../modal/MODAL.js";import P from"../../../p/P.js";export default class THUMBNAIL extends CONTAINER{constructor(t,e){super(t,"DIV",e),this.setClass("col-xs-12 col-sm-6 col-md-4 col-lg-offset-0"),this.body.pane.addClass("thumbnail")}construct(){if(this.image=new IMG(this.body.pane,new MODEL),this.header=new HEADER(this.body.pane,(new MODEL).set({label:this.data.header})),this.p=new P(this.body.pane,new MODEL,new STRING(this.data.p).truncate(128)),this.buttonGroup=new BUTTONGROUP(this.body.pane,"btn-block"),this.button=this.buttonGroup.addButton("",ICONS.CHEVRON_RIGHT),this.button.addClass("btn-block"),this.dataId>0||-1===this.dataId){let t=null;if(this.data.img)if(Number.isInteger(parseInt(this.data.img)))try{$.getJSON("/FORMPOST/Get/"+parseInt(this.data.img),e=>{if(e.model)if(e.model.jsonResults){t=JSON.parse(e.model.jsonResults);let a={};for(let e=0;e<t.length;e++)a[t[e].name]=t[e].value;try{this.image.el.src=a.base64}catch(t){console.log("Unable to set Thumbnail image",a)}if(this.data.showImageDetails)try{this.header.el.innerHTML=a.filename,this.p.el.innerHTML="Id: "+a.id+"<br>Filesize: "+a.fileSize+"kb ("+a.dimX+" x "+a.dimY+")<br>"+a.fileType}catch(t){console.log("Unable to set Thumbnail attributes",a)}}else console.log("Json Results empty")})}catch(t){console.log("Unable to retrieve FormPost.",t)}else this.image=new IMG(this.body.pane,new MODEL(new ATTRIBUTES({src:this.data.img})));this.button.el.onclick=this.launchModal.bind(this)}}launchModal(){this.modal=new MODAL(this.data.header),this.modal.container.body.pane.addClass("thumbnail"),this.modal.container.image=new IMG(this.modal.container.body.pane,new MODEL),this.modal.container.image.el.src=this.image.el.src,this.modal.container.header=new HEADER(this.modal.container.body.pane,(new MODEL).set({label:this.data.header})),this.modal.container.p=new P(this.modal.container.body.pane,new MODEL(new ATTRIBUTES({style:"height:auto;"})),this.data.p),this.modal.show()}}export{ATTRIBUTES,EL,MODEL};
//# sourceMappingURL=THUMBNAIL.js.map
