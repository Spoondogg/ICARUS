import NAVITEM,{ATTRIBUTES,EL,MODEL}from"../../../nav/navitem/NAVITEM.js";import BUTTONGROUP from"../../../group/buttongroup/BUTTONGROUP.js";import HEADER from"../../../header/header.js";import IMG from"../../../img/IMG.js";import MODAL from"../../../modal/MODAL.js";import P from"../../../p/P.js";import STRING from"../../../../../STRING.js";export default class THUMBNAIL extends NAVITEM{constructor(e,t){super(e,t),this.addClass("thumbnail col-xs-12 col-sm-6 col-lg-offset-0")}construct(){if(this.image=new IMG(this.body.pane,new MODEL),this.header=new HEADER(this.body.pane,(new MODEL).set({label:this.data.header})),this.p=new P(this.body.pane,new MODEL,new STRING(this.data.p).truncate(128)),this.buttonGroup=new BUTTONGROUP(this.body.pane,"btn-block"),this.dataId>0||-1===this.dataId){let e=null;if(this.data.img)if(Number.isInteger(parseInt(this.data.img)))try{$.getJSON("/FORMPOST/Get/"+parseInt(this.data.img),t=>{if(t.model)if(t.model.jsonResults){e=JSON.parse(t.model.jsonResults);let a={};for(let t=0;t<e.length;t++)a[e[t].name]=e[t].value;try{this.image.el.src=a.base64}catch(e){console.log("Unable to set Thumbnail image",a)}if(this.data.showImageDetails)try{this.header.el.innerHTML=a.filename,this.p.el.innerHTML="Id: "+a.id+"<br>Filesize: "+a.fileSize+"kb ("+a.dimX+" x "+a.dimY+")<br>"+a.fileType}catch(e){console.log("Unable to set Thumbnail attributes",a)}}else console.log("Json Results empty")})}catch(e){console.log("Unable to retrieve FormPost.",e)}else this.image=new IMG(this.body.pane,new MODEL(new ATTRIBUTES({src:this.data.img})));this.button.el.onclick=this.launchModal.bind(this)}}launchModal(){this.modal=new MODAL(this.data.header),this.modal.container.body.pane.addClass("thumbnail"),this.modal.container.image=new IMG(this.modal.container.body.pane,new MODEL),this.modal.container.image.el.src=this.image.el.src,this.modal.container.header=new HEADER(this.modal.container.body.pane,(new MODEL).set({label:this.data.header})),this.modal.container.p=new P(this.modal.container.body.pane,new MODEL(new ATTRIBUTES({style:"height:auto;"})),this.data.p),this.modal.show()}}export{ATTRIBUTES,EL,MODEL};
//# sourceMappingURL=THUMBNAIL.js.map
