{"version":3,"sources":["model/EL/container/chat/CHAT.js"],"names":["CONTAINER","ATTRIBUTES","EL","MODEL","FORM","CHAT","[object Object]","node","model","super","this","addClass","user","getMainContainer","getUser","form","createEmptyForm","body","pane","el","style","$","insertAfter","inputs","name","type","value","set","element","label","fieldset","formElementGroup","addInputElements","setPostUrl","afterSuccessfulPost","payload","setTimeout","addStatement","message","bind","chatInput","children","input","console","log","onkeypress","postStatement","window","event","keyCode","post","username","string","statement","display","thumb","class","img","src","bubble","panel","heading","strong","cite","fadeIn","animate","scrollTop","prop"],"mappings":"OAGOA,WAAaC,WAAYC,GAAIC,UAAa,yBAC1CC,SAAU,oCAOF,MAAMC,aAAaL,UAMjCM,YAAYC,EAAMC,GACjBC,MAAMF,EAAM,MAAOC,EAAO,IAC1BE,KAAKC,SAAS,QACdD,KAAKE,KAAOF,KAAKG,mBAAmBC,UAEpCJ,KAAKK,KAAOX,KAAKY,gBAAgBN,KAAKO,KAAKC,MAC3CR,KAAKK,KAAKI,GAAGC,MAAQ,wCACrBC,EAAEX,KAAKK,KAAKI,IAAIG,YAAYZ,KAAKO,KAAKC,KAAKC,IAC3C,IAAII,EAAS,CACZ,IAAIpB,MAAM,IAAIF,WAAW,CACxBuB,KAAQ,YACRC,KAAQ,WACRC,MAAS,MACNC,IAAI,CACPC,QAAW,WACXC,MAAS,aAGXnB,KAAKK,KAAKe,SAASC,iBAAiBC,iBAAiBT,GACrDb,KAAKK,KAAKkB,WAAW,aAIrBvB,KAAKK,KAAKmB,oBAAsB,SAASC,GAExCC,WAAW,KACV1B,KAAK2B,aAAa,SAAUF,EAAQG,UAClC,MACFC,KAAK7B,MACPA,KAAK8B,UAAY9B,KAAKK,KAAKe,SAASC,iBAAiBU,SAAS,GAAGC,MACjEC,QAAQC,IAAI,aAAclC,KAAK8B,WAC/B9B,KAAK8B,UAAUrB,GAAG0B,WAAanC,KAAKoC,cAAcP,KAAK7B,MAOxDJ,gBACC,OAA6B,KAAzByC,OAAOC,MAAMC,UAChBvC,KAAK2B,aAAa3B,KAAKE,KAAMF,KAAK8B,UAAUrB,GAAGO,OAC/ChB,KAAKK,KAAKmC,OACVxC,KAAK8B,UAAUrB,GAAGO,MAAQ,IACnB,GAUTpB,aAAa6C,EAAUC,GACtB,IAAIC,EAAY,IAAInD,GAAGQ,KAAKO,KAAKC,KAAM,MAAO,IAAIf,MAAM,cAmBxD,OAlBAkD,EAAUlC,GAAGC,MAAMkC,QAAU,OAC7BD,EAAUE,MAAQ,IAAIrD,GAAGmD,EAAW,MAAO,IAAIlD,MAAM,IAAIF,WAAW,CACnEuD,MAAS,YAEVH,EAAUE,MAAME,IAAM,IAAIvD,GAAGmD,EAAUE,MAAO,MAAO,IAAIpD,MAAM,IAAIF,WAAW,CAC7EuD,MAAS,aACTE,IAAO,wDAERL,EAAUM,OAAS,IAAIzD,GAAGmD,EAAW,MAAO,IAAIlD,MAAM,IAAIF,WAAW,CACpEuD,MAAS,aAEVH,EAAUM,OAAOC,MAAQ,IAAI1D,GAAGmD,EAAUM,OAAQ,MAAO,IAAIxD,MAAM,wBACnEkD,EAAUM,OAAOC,MAAMC,QAAU,IAAI3D,GAAGmD,EAAUM,OAAOC,MAAO,MAAO,IAAIzD,MAAM,kBACjFkD,EAAUM,OAAOC,MAAMC,QAAQC,OAAS,IAAI5D,GAAGmD,EAAUM,OAAOC,MAAMC,QAAS,SAAU,IAAI1D,MAASgD,GACtGE,EAAUM,OAAOC,MAAMC,QAAQE,KAAO,IAAI7D,GAAGmD,EAAUM,OAAOC,MAAMC,QAAS,OAAQ,IAAI1D,MAAS,wBAClGkD,EAAUM,OAAOC,MAAM3C,KAAO,IAAIf,GAAGmD,EAAUM,OAAOC,MAAO,MAAO,IAAIzD,MAAM,cAAeiD,GAC7F/B,EAAEgC,EAAUlC,IAAI6C,OAAO,KACvB3C,EAAEX,KAAKO,KAAKC,KAAKC,IAAI8C,QAAQ,CAAEC,UAAW7C,EAAEX,KAAKO,KAAKC,KAAKC,IAAIgD,KAAK,iBAAmB,KAChFd,EAER/C,YACC8B,WAAW,KACV1B,KAAK2B,aAAa,SAAU,SAAW3B,KAAKE,OAC1C","file":"CHAT.js","sourcesContent":["/**\r\n    @module\r\n*/\r\nimport CONTAINER, { ATTRIBUTES, EL, MODEL } from '../CONTAINER.js';\r\nimport FORM from '../../form/FORM.js';\r\n/**\r\n    A Chat Window\r\n    @class\r\n    @extends CONTAINER\r\n    @todo Consider extending FORM instead of CONTAINER (ie: A custom CHAT FORM)\r\n*/\r\nexport default class CHAT extends CONTAINER {\r\n\t/**\r\n\t    Constructs a SECTION Container Element\r\n\t    @param {CONTAINER} node The ARTICLE to contain the section\r\n\t    @param {MODEL} model The SECTION object retrieves from the server\r\n\t */\r\n\tconstructor(node, model) {\r\n\t\tsuper(node, 'DIV', model, []);\r\n\t\tthis.addClass('chat');\r\n\t\tthis.user = this.getMainContainer().getUser();\r\n\t\t//this.conversation = new EL(this.body.pane, 'DIV', new MODEL('conversation'));\r\n\t\tthis.form = FORM.createEmptyForm(this.body.pane);\r\n\t\tthis.form.el.style = 'height:68px;background-color:#5a5a5a;';\r\n\t\t$(this.form.el).insertAfter(this.body.pane.el);\r\n\t\tlet inputs = [\r\n\t\t\tnew MODEL(new ATTRIBUTES({\r\n\t\t\t\t'name': 'statement',\r\n\t\t\t\t'type': 'TEXTAREA',\r\n\t\t\t\t'value': ''\r\n\t\t\t})).set({\r\n\t\t\t\t'element': 'TEXTAREA',\r\n\t\t\t\t'label': 'element'\r\n\t\t\t})\r\n\t\t];\r\n\t\tthis.form.fieldset.formElementGroup.addInputElements(inputs);\r\n\t\tthis.form.setPostUrl('CHAT/Talk');\r\n\t\t/*\r\n\t\t    Show the Payload response\r\n\t\t*/\r\n\t\tthis.form.afterSuccessfulPost = function(payload) {\r\n\t\t\t//console.log(payload);\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.addStatement('ICARUS', payload.message);\r\n\t\t\t}, 1000);\r\n\t\t}.bind(this);\r\n\t\tthis.chatInput = this.form.fieldset.formElementGroup.children[0].input;\r\n\t\tconsole.log('Chat Input', this.chatInput);\r\n\t\tthis.chatInput.el.onkeypress = this.postStatement.bind(this);\r\n\t}\r\n\t/**\r\n\t     Posts the chat statement to the server and handles any responses\r\n\t     when the user presses ENTER \r\n\t     @returns {boolean} True if succeeds\r\n\t*/\r\n\tpostStatement() {\r\n\t\tif (window.event.keyCode === 13) {\r\n\t\t\tthis.addStatement(this.user, this.chatInput.el.value);\r\n\t\t\tthis.form.post();\r\n\t\t\tthis.chatInput.el.value = '';\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\t/**\r\n\t     Adds a statement to the conversation window\r\n\t     @param {string} username User name\r\n\t     @param {string} string Statement\r\n\t     @returns {EL} The statement object\r\n\t */\r\n\taddStatement(username, string) {\r\n\t\tlet statement = new EL(this.body.pane, 'DIV', new MODEL('statement'));\r\n\t\tstatement.el.style.display = \"none\";\r\n\t\tstatement.thumb = new EL(statement, 'DIV', new MODEL(new ATTRIBUTES({\r\n\t\t\t'class': 'thumb'\r\n\t\t})));\r\n\t\tstatement.thumb.img = new EL(statement.thumb, 'IMG', new MODEL(new ATTRIBUTES({\r\n\t\t\t'class': 'user-photo',\r\n\t\t\t'src': 'https://ssl.gstatic.com/accounts/ui/avatar_2x.png'\r\n\t\t})));\r\n\t\tstatement.bubble = new EL(statement, 'DIV', new MODEL(new ATTRIBUTES({\r\n\t\t\t'class': 'bubble'\r\n\t\t})));\r\n\t\tstatement.bubble.panel = new EL(statement.bubble, 'DIV', new MODEL('panel panel-default'));\r\n\t\tstatement.bubble.panel.heading = new EL(statement.bubble.panel, 'DIV', new MODEL('panel-heading'));\r\n\t\tstatement.bubble.panel.heading.strong = new EL(statement.bubble.panel.heading, 'STRONG', new MODEL(), username);\r\n\t\tstatement.bubble.panel.heading.cite = new EL(statement.bubble.panel.heading, 'CITE', new MODEL(), 'commented X mins ago');\r\n\t\tstatement.bubble.panel.body = new EL(statement.bubble.panel, 'DIV', new MODEL('panel-body'), string);\r\n\t\t$(statement.el).fadeIn(500);\r\n\t\t$(this.body.pane.el).animate({ scrollTop: $(this.body.pane.el).prop(\"scrollHeight\") }, 1000);\r\n\t\treturn statement;\r\n\t}\r\n\tconstruct() {\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.addStatement('ICARUS', 'Hello ' + this.user);\r\n\t\t}, 2000);\r\n\t}\r\n}"]}