{"version":3,"sources":["model/EL/nav/menu/NAVHEADER.js"],"names":["MENU","MODEL","ICONS","SVG","NAVHEADER","[object Object]","node","model","super","this","logo","tabs","set","name","tab","addDefaultTab","label","addOptionsMenu","addNavItem","anchor","el","onclick","getContainer","toggleBody","pressTimer","onmousedown","ev","window","setTimeout","launchSidebarSave","stopPropagation","onmouseup","clearTimeout","getMainContainer","user","toggle","addNavItemIcon","icon","COG","toggleCollapse","bind","menu","optionGroups","oG","length","addMenu","showHeader","collapsed","e","modal","getProtoTypeByClass","console","warn","className","log","container","main","sidebar","empty","toggleSidebar","save","target","$","collapse"],"mappings":"OACOA,MAAQC,UAAa,yBACnBC,UAAa,oCACfC,QAAS,kCAKD,MAAMC,kBAAkBJ,KAKtCK,YAAYC,EAAMC,GACjBC,MAAMF,EAAMC,GACZE,KAAKC,KAAO,IAAIP,IAAIM,KAAM,YAAa,GAAI,QAC3CA,KAAKE,KAAO,IAAIX,KAAKS,MAAM,IAAIR,OAAQW,IAAI,CAC1CC,KAAQ,UAETJ,KAAKK,IAAML,KAAKM,cAAcR,EAAMS,OACpCP,KAAKQ,iBAONZ,cAAcW,GACb,IAAIF,EAAML,KAAKE,KAAKO,WAAW,IAAIjB,MAAM,aAAaW,IAAI,CACzDO,QAAU,IAAIlB,OAAQW,IAAI,CACzBI,MAAAA,OAkBF,OAfAF,EAAIM,GAAGC,QAAU,MAChBZ,KAAKa,eAAeC,eAErBT,EAAIU,WAAa,KACjBV,EAAIM,GAAGK,YAAc,CAACC,IACrBjB,KAAKK,IAAIU,WAAaG,OAAOC,WAAW,KACvCnB,KAAKoB,oBACLH,EAAGI,mBACD,OAEJhB,EAAIM,GAAGW,UAAY,CAACL,IACnBM,aAAavB,KAAKK,IAAIU,YACtBE,EAAGI,mBACI,IAEDhB,EAQRT,iBACC,IACC,GAAoD,UAAhDI,KAAKa,eAAeW,mBAAmBC,KAAkB,CAC5DzB,KAAK0B,OAAS1B,KAAKE,KAAKyB,eAAe,IAAInC,MAAM,cAAcW,IAAI,CAClEO,QAAU,IAAIlB,OAAQW,IAAI,CACzByB,KAAQnC,MAAMoC,SAGhB7B,KAAK0B,OAAOf,GAAGC,QAAUZ,KAAK8B,eAAeC,KAAK/B,MAClDA,KAAKgC,KAAO,IAAIzC,KAAKS,KAAM,IAAIR,MAAM,YAAYW,IAAI,CACpDC,KAAQ,UAET,IAAI6B,EAAe,CAAC,WAAY,OAAQ,OACxC,IAAK,IAAIC,EAAK,EAAGA,EAAKD,EAAaE,OAAQD,IAC1ClC,KAAKgC,KAAKI,QAAQ,IAAI5C,MAAM,uBAAuBW,IAAI,CACtDC,KAAQ6B,EAAaC,GACrBG,WAAc,EACdC,UAAa,MAIf,MAAOC,GACR,IAAIC,EAAQxC,KAAKyC,oBAAoB,SACrC,GAAc,OAAVD,EAEH,MADAE,QAAQC,KAAK,oCAAqCJ,GAC5CA,EAEN,OAAQC,EAAMI,WACb,IAAK,SACL,IAAK,SACJ,MACD,QACCF,QAAQC,KAAK3C,KAAK4C,UAAY,+CAAgDJ,KAUnF5C,oBACC,IACC8C,QAAQG,IAAI,gBAAkB7C,KAAKK,IAAIK,OAAOH,OAC9C,IAAIuC,EAAY9C,KAAKa,eACjBkC,EAAOD,EAAUtB,mBACrBuB,EAAKC,QAAQC,QACbF,EAAKG,gBACLJ,EAAUK,KAAKJ,EAAKC,SACpBD,EAAKK,OAASN,EACb,MAAOP,GACRG,QAAQC,KAAKJ,IAMf3C,iBACCyD,EAAErD,KAAKgC,KAAKrB,IAAI2C,SAAS","file":"NAVHEADER.js","sourcesContent":["/** @module */\r\nimport MENU, { MODEL } from '../menu/MENU.js';\r\nimport { ICONS } from '../../../../enums/ICONS.js';\r\nimport SVG from '../../svg/SVG.js';\r\n/** An expandable menu with clickable header that opens a container full of icons\r\n    @class\r\n    @extends MENU\r\n*/\r\nexport default class NAVHEADER extends MENU {\r\n\t/** Construct a Nav Header.\r\n\t    @param {EL} node The object that the navHeader is appended to\r\n\t    @param {MODEL} model Object model\r\n\t */\r\n\tconstructor(node, model) {\r\n\t\tsuper(node, model);\r\n\t\tthis.logo = new SVG(this, '0 0 32 32', '', '#CCC');\r\n\t\tthis.tabs = new MENU(this, new MODEL().set({ // Left aligned group\r\n\t\t\t'name': 'tabs'\r\n\t\t}));\r\n\t\tthis.tab = this.addDefaultTab(model.label);\r\n\t\tthis.addOptionsMenu();\r\n\t}\r\n\t/**\r\n\t    Adds the default toggle tab button to this Nav Header\r\n\t    @param {string} label The tab label\r\n\t    @returns {NAVITEM} A Default Tab\r\n\t*/\r\n\taddDefaultTab(label) {\r\n\t\tlet tab = this.tabs.addNavItem(new MODEL('pull-left').set({ // Add a default tab to show/hide the collapse\r\n\t\t\t'anchor': new MODEL().set({\r\n\t\t\t\tlabel\r\n\t\t\t})\r\n\t\t}));\r\n\t\ttab.el.onclick = () => { // Toggle Body\r\n\t\t\tthis.getContainer().toggleBody();\r\n\t\t};\r\n\t\ttab.pressTimer = null; // Simulate LONG CLICK to edit the label\r\n\t\ttab.el.onmousedown = (ev) => {\r\n\t\t\tthis.tab.pressTimer = window.setTimeout(() => {\r\n\t\t\t\tthis.launchSidebarSave();\r\n\t\t\t\tev.stopPropagation();\r\n\t\t\t}, 1000);\r\n\t\t};\r\n\t\ttab.el.onmouseup = (ev) => {\r\n\t\t\tclearTimeout(this.tab.pressTimer);\r\n\t\t\tev.stopPropagation();\r\n\t\t\treturn false;\r\n\t\t};\r\n\t\treturn tab;\r\n\t}\r\n\t/**\r\n\t\t    Adds the Options/Config menu to the NavHeader.\r\n\t        Adds a right aligned tab to show/hide the Options Menu\r\n\t        @throws Throws an error if this NAVHEADER is not a child of a valid CONTAINER or MODAL\r\n\t\t    @returns {void}\r\n\t\t*/\r\n\taddOptionsMenu() {\r\n\t\ttry {\r\n\t\t\tif (this.getContainer().getMainContainer().user !== 'Guest') {\r\n\t\t\t\tthis.toggle = this.tabs.addNavItemIcon(new MODEL('pull-right').set({\r\n\t\t\t\t\t'anchor': new MODEL().set({\r\n\t\t\t\t\t\t'icon': ICONS.COG\r\n\t\t\t\t\t})\r\n\t\t\t\t}));\r\n\t\t\t\tthis.toggle.el.onclick = this.toggleCollapse.bind(this);\r\n\t\t\t\tthis.menu = new MENU(this, new MODEL('collapse').set({ // Create the submenu to be toggled\r\n\t\t\t\t\t'name': 'menu'\r\n\t\t\t\t}));\r\n\t\t\t\tlet optionGroups = ['ELEMENTS', 'CRUD', 'DOM']; //'USER' // Add Default OPTIONS groupings as HORIZONTAL menus\r\n\t\t\t\tfor (let oG = 0; oG < optionGroups.length; oG++) {\r\n\t\t\t\t\tthis.menu.addMenu(new MODEL('horizontal collapse').set({\r\n\t\t\t\t\t\t'name': optionGroups[oG],\r\n\t\t\t\t\t\t'showHeader': 1,\r\n\t\t\t\t\t\t'collapsed': 1\r\n\t\t\t\t\t}));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tlet modal = this.getProtoTypeByClass('MODAL');\r\n\t\t\tif (modal === null) {\r\n\t\t\t\tconsole.warn('Unable to retrieve MAIN Container', e);\r\n\t\t\t\tthrow e;\r\n\t\t\t} else {\r\n\t\t\t\tswitch (modal.className) {\r\n\t\t\t\t\tcase 'LOADER':\r\n\t\t\t\t\tcase 'PROMPT':\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tconsole.warn(this.className + ' exists inside an unrecognized Modal window.', modal);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t/** Clears the Main sidebar is cleared and populated with\r\n\t\ta save form for this Container\r\n\t    @returns {void}\r\n\t*/\r\n\tlaunchSidebarSave() {\r\n\t\ttry {\r\n\t\t\tconsole.log('Long Clicked ' + this.tab.anchor.label);\r\n\t\t\tlet container = this.getContainer();\r\n\t\t\tlet main = container.getMainContainer();\r\n\t\t\tmain.sidebar.empty();\r\n\t\t\tmain.toggleSidebar();\r\n\t\t\tcontainer.save(main.sidebar);\r\n\t\t\tmain.target = container;\r\n\t\t} catch (e) {\r\n\t\t\tconsole.warn(e);\r\n\t\t}\r\n\t}\r\n\t/**\tShow/Hide this.menu\r\n\t    @returns {void}\r\n\t*/\r\n\ttoggleCollapse() {\r\n\t\t$(this.menu.el).collapse('toggle');\r\n\t}\r\n}"]}