import MENU,{MODEL}from"../menu/MENU.js";import{ICONS}from"../../../../enums/ICONS.js";import SVG from"../../svg/SVG.js";export default class NAVHEADER extends MENU{constructor(e,t){super(e,t),this.logo=new SVG(this,"0 0 32 32","","#CCC"),this.tabs=new MENU(this,(new MODEL).set({name:"tabs"})),this.tab=this.addDefaultTab(t.label),this.addOptionsMenu()}addDefaultTab(e){let t=this.tabs.addNavItem(new MODEL("pull-left").set({anchor:(new MODEL).set({label:e})}));return t.el.onclick=(()=>{this.getContainer().toggleBody()}),t.pressTimer=null,t.el.onmousedown=(e=>{this.tab.pressTimer=window.setTimeout(()=>{this.launchSidebarSave(),e.stopPropagation()},1e3)}),t.el.onmouseup=(e=>(clearTimeout(this.tab.pressTimer),e.stopPropagation(),!1)),t}addOptionsMenu(){try{if("Guest"!==this.getContainer().getMainContainer().user){this.toggle=this.tabs.addNavItemIcon(new MODEL("pull-right").set({anchor:(new MODEL).set({icon:ICONS.COG})})),this.toggle.el.onclick=this.toggleCollapse.bind(this),this.menu=new MENU(this,new MODEL("collapse").set({name:"menu"}));let e=["ELEMENTS","CRUD","DOM"];for(let t=0;t<e.length;t++)this.menu.addMenu(new MODEL("horizontal collapse").set({name:e[t],showHeader:1,collapsed:1}))}}catch(e){let t=this.getProtoTypeByClass("MODAL");if(null===t)throw console.warn("Unable to retrieve MAIN Container",e),e;switch(t.className){case"LOADER":case"PROMPT":break;default:console.warn(this.className+" exists inside an unrecognized Modal window.",t)}}}launchSidebarSave(){try{console.log("Long Clicked "+this.tab.anchor.label);let e=this.getContainer(),t=e.getMainContainer();t.sidebar.empty(),t.toggleSidebar(),e.save(t.sidebar),t.target=e}catch(e){console.warn(e)}}toggleCollapse(){$(this.menu.el).collapse("toggle")}}
//# sourceMappingURL=NAVHEADER.js.map
