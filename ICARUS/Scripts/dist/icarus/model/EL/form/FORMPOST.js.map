{"version":3,"sources":["icarus/model/EL/form/FORMPOST.js"],"names":["FORMPOST","[object Object]","form","this","token","getMainContainer","getToken","id","el","getAttribute","formId","label","results","getResultsAsArray","message","obj","forEach","item","name","value","push","e","console","warn"],"mappings":"eAQe,MAAMA,SAIpBC,YAAYC,GAKXC,KAAKC,MAAQF,EAAKG,mBAAmBC,WACrCH,KAAKI,GAAKL,EAAKM,GAAGC,aAAa,MAC/BN,KAAKO,OAASR,EAAKM,GAAGC,aAAa,MACnCN,KAAKQ,MAAQT,EAAKM,GAAGC,aAAa,QAElCN,KAAKS,QAAUV,EAAKW,oBACpBV,KAAKW,QAAU,GAMhBb,qBACC,IAAIc,EAAM,GACV,IACCZ,KAAKS,QAAQI,QAASC,SACS,IAAnBF,EAAIE,EAAKC,MACnBH,EAAIE,EAAKC,MAAQD,EAAKE,OAAS,IAE1BJ,EAAIE,EAAKC,MAAME,OACnBL,EAAIE,EAAKC,MAAQ,CAACH,EAAIE,EAAKC,QAE5BH,EAAIE,EAAKC,MAAME,KAAKH,EAAKE,OAAS,OAGnC,MAAOE,GACRC,QAAQC,KAAK,0CAA2CF,GAEzD,OAAON","file":"FORMPOST.js","sourcesContent":["/**\r\n    @module\r\n*/\r\n//import FORMINPUTTOKEN from '../formelement/forminput/forminputtoken/FORMINPUTTOKEN.js';\r\n/**\r\n    Represents the data object to be submitted to the server for validation.\r\n    @class    \r\n*/\r\nexport default class FORMPOST {\r\n\t/**\r\n\t    @param {FORM} form The form that generated this FORMPOST\r\n\t */\r\n\tconstructor(form) {\r\n\t\t/**\r\n\t\t    The form token\r\n\t\t    @type {string}\r\n\t\t*/\r\n\t\tthis.token = form.getMainContainer().getToken(); //TOKEN.getToken().value; // __RequestVerificationToken\r\n\t\tthis.id = form.el.getAttribute('id');\r\n\t\tthis.formId = form.el.getAttribute('id');\r\n\t\tthis.label = form.el.getAttribute('name');\r\n\t\t// An ordered array of key/value pairs as they appear in the FORM\r\n\t\tthis.results = form.getResultsAsArray();\r\n\t\tthis.message = '';\r\n\t}\r\n\t/**\r\n\t    Serialize the form into a JSON object key/value\r\n\t    @returns {object} Form Results as an Object\r\n\t*/\r\n\tgetResultsAsObject() {\r\n\t\tlet obj = {};\r\n\t\ttry {\r\n\t\t\tthis.results.forEach((item) => { //index\r\n\t\t\t\tif (typeof obj[item.name] === 'undefined') { // New\r\n\t\t\t\t\tobj[item.name] = item.value || '';\r\n\t\t\t\t} else { // Existing\r\n\t\t\t\t\tif (!obj[item.name].push) {\r\n\t\t\t\t\t\tobj[item.name] = [obj[item.name]];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tobj[item.name].push(item.value || '');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} catch (e) {\r\n\t\t\tconsole.warn('Unable to parse FormPost into an object', e);\r\n\t\t}\r\n\t\treturn obj;\r\n\t}\r\n}"]}